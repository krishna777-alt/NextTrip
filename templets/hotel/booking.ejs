<%- include("nav")%>
<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
<div class="p-8 bg-gray-50 min-h-screen">
  <!-- PAGE HEADER -->
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-2xl font-bold text-gray-800">Manage Bookings</h1>
      <p class="text-sm text-gray-500">
        View and manage all hotel bookings & payments
      </p>
    </div>
    <div class="bg-white rounded-xl p-6 shadow-sm">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold">Room Availability</h2>
       
      </div>

      <!-- LEGEND -->
     
      <!-- ROOMS GRID -->
    </div>
  </div>

  <!-- TABLE CARD -->
  <div class="bg-white rounded-2xl shadow-sm border overflow-hidden">
    <table class="w-full text-sm">
      <thead class="bg-gray-100 text-gray-600 uppercase text-xs">
        <tr>
          <th class="px-6 py-4 text-left">Guest</th>
          <th class="px-6 py-4 text-left">Room</th>
          <th class="px-6 py-4 text-left">Amount</th>
          <th class="px-6 py-4 text-left">Payment</th>
          <th class="px-6 py-4 text-left">Status</th>
          <th class="px-6 py-4 text-left">Date</th>
          <th class="px-6 py-4 text-center">Action</th>
        </tr>
      </thead>

      <tbody class="divide-y">
        <% bookings.forEach(b => { %>
        <tr class="hover:bg-gray-50 transition">
          <!-- GUEST -->
          <td class="px-6 py-4">
            <div class="font-medium text-gray-800">
              <%= b.guestName || b.userId?.name || "Guest" %>
            </div>
            <div class="text-xs text-gray-500">
              <%= b.email || b.userId?.email || "—" %>
            </div>
          </td>

          <!-- ROOM -->
          <td class="px-6 py-4">
            <div class="font-medium">
              Room <%= b.roomId?.roomNum || "-" %>
            </div>
            <div class="text-xs text-gray-500">
              <%= b.roomType || b.roomId?.roomTypeCode %>
            </div>
          </td>

          <!-- AMOUNT -->
          <td class="px-6 py-4 font-semibold text-gray-800">
            ₹<%= b.amount %>
          </td>

          <!-- PAYMENT METHOD -->
          <td class="px-6 py-4">
            <span class="px-3 py-1 rounded-full text-xs font-medium
              <%= b.paymentMethod === "CreditCard"
                ? "bg-indigo-100 text-indigo-700"
                : "bg-gray-100 text-gray-700" %>">
              <%= b.paymentMethod %>
            </span>
          </td>

          <!-- STATUS -->
          <td class="px-6 py-4">
            <span class="px-3 py-1 rounded-full text-xs font-semibold
              <%= b.status === "CAPTURED"
                ? "bg-green-100 text-green-700"
                : b.status === "PENDING"
                ? "bg-yellow-100 text-yellow-700"
                : b.status === "FAILED"
                ? "bg-red-100 text-red-700"
                : "bg-gray-200 text-gray-700" %>">
              <%= b.status %>
            </span>
          </td>

          <!-- DATE -->
          <td class="px-6 py-4 text-gray-500">
            <%= new Date(b.createdAt).toLocaleDateString() %>
          </td>

          <!-- ACTION -->
          <td class="px-6 py-4 text-center">
            <a
              href="/admin/bookings/<%= b._id %>"
              class="text-indigo-600 hover:underline text-sm font-medium"
            >
              View
            </a>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>

    <% if (bookings.length === 0) { %>
      <div class="p-10 text-center text-gray-500">
        No bookings found.
      </div>
    <% } %>
  </div>
</div>


